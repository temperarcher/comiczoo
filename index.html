<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<title>ComicZoo – Login</title>

<!-- Firebase COMPAT -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>

<style>
body {
  font-family: Arial, sans-serif;
  background: #f4f4f4;
  padding: 40px;
}
.card {
  background: white;
  padding: 20px;
  max-width: 400px;
  margin: auto;
  border-radius: 8px;
}
input, button {
  width: 100%;
  padding: 10px;
  margin: 6px 0;
}
</style>
</head>

<body>

<div class="card" id="auth">
  <h2>Login / Registrazione</h2>
  <input id="email" type="email" placeholder="Email">
  <input id="password" type="password" placeholder="Password">
  <button onclick="login()">Login</button>
  <button onclick="register()">Registrati</button>
</div>

<div class="card" id="app" style="display:none">
  <h2>✅ Sei loggato</h2>
  <p id="userEmail"></p>
  <button onclick="logout()">Logout</button>
</div>

<script>
/* ===============================
   1️⃣ CONFIG
================================ */
const firebaseConfig = {
  apiKey: "AIzaSyCMWWtqeymGjCxQiQbGcIEZUAEkhaUt-TI",
  authDomain: "comiczoo.firebaseapp.com",
  projectId: "comiczoo"
};

/* ===============================
   2️⃣ INIT
================================ */
firebase.initializeApp(firebaseConfig);

/* ===============================
   3️⃣ AUTH
================================ */
const auth = firebase.auth();

/* ===============================
   4️⃣ UI ELEMENTS
================================ */
const authDiv = document.getElementById("auth");
const appDiv  = document.getElementById("app");
const userEmail = document.getElementById("userEmail");

/* ===============================
   5️⃣ AUTH STATE
================================ */
auth.onAuthStateChanged(user => {
  if (user) {
    authDiv.style.display = "none";
    appDiv.style.display  = "block";
    userEmail.textContent = user.email;
  } else {
    authDiv.style.display = "block";
    appDiv.style.display  = "none";
  }
});

/* ===============================
   6️⃣ FUNCTIONS
================================ */
function login() {
  auth.signInWithEmailAndPassword(
    email.value,
    password.value
  ).catch(err => alert(err.message));
}

function register() {
  auth.createUserWithEmailAndPassword(
    email.value,
    password.value
  ).catch(err => alert(err.message));
}

function logout() {
  auth.signOut();
}
</script>

</body>
</html>
